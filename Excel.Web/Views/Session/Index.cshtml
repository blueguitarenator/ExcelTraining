@model Excel.Web.Models.SessionModel

<style>
    .datepicker {
        z-index: 1151 !important;
    }
</style>

@{
    ViewBag.Title = "Index";
    AjaxOptions ajaxOptions = new AjaxOptions
    {
        UpdateTargetId = "PersonalTraining",
        HttpMethod = "GET"       
    };
}

<h2>Sessions</h2>

@using (Ajax.BeginForm("_PersonalTrainingGrid", ajaxOptions))
{
    @Html.LabelFor(model => model.SessionDateTime, new { @class = "col-md-2 control-label" })
    <div class="col-md-10">
        @Html.EditorFor(model => model.SessionDateTime, new { @class = "form-control datepicker", placeholder = "Enter Session date here..." })
        <button type="submit">Submit</button>
    </div>
}

<input type="hidden" id="hdnVal" value="@Model.SessionDateTime" />

@Html.LabelFor(m => m.LocationSelectList, "Location", new { @class = "control-label ddlLabel sr-only" })
@Html.DropDownList("loc", Model.LocationSelectList,
     new { @onchange = "CallChangefunc(this.value, '" + @Model.SessionDateTime + "')", @class = "form-control floatLable" })


<!-- If Personal Training -->
<div id="PersonalTraining">
    @Html.Action("_PersonalTrainingGrid", new { model = Model })
</div>

<!-- Else Sports Training -->

<script>
    function CallChangefunc(val, dt) {
        var valueToStore = $("#hdnVal").val();
        window.location.href = "/Session/ChangeLocation?locId=" + val + "&dateTime=" + valueToStore;
    }
</script>